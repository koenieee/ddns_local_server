<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1811px" preserveAspectRatio="none" style="width:2080px;height:1811px;background:#FAFAFA;" version="1.1" viewBox="0 0 2080 1811" width="2080px" zoomAndPan="magnify"><defs><filter height="300%" id="ffjoogvxj1752" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="320" x="875.75" y="26.708">DDNS Updater - Data Flow Diagram</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1224.25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="376" y="195.5156"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1165.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="665" y="224.6484"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1107.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="866" y="253.7813"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1057.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1099" y="282.9141"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1230" y="312.0469"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1358.5" y="428.5781"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1358.5" y="1077.5"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1497.5" y="569.2422"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1497.5" y="685.7734"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="246.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1497.5" y="802.3047"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1656.5" y="1194.0313"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1656.5" y="1531.1641"/><rect fill="#FAFAFA" filter="url(#ffjoogvxj1752)" height="802.3906" rx="7.5" ry="7.5" style="stroke: #000000; stroke-width: 2.0;" width="1738.5" x="320" y="530.9766"/><rect fill="#FAFAFA" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1738.5" x="320" y="1289.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="381" x2="381" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="670" x2="670" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="871" x2="871" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1103.5" x2="1103.5" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1234.5" x2="1234.5" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1363.5" x2="1363.5" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1502.5" x2="1502.5" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1661.5" x2="1661.5" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1793.5" x2="1793.5" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1896.5" x2="1896.5" y1="121.25" y2="1723.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1999.5" x2="1999.5" y1="121.25" y2="1723.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="117.9482">User</text><ellipse cx="27" cy="47.9531" fill="#E3F2FD" filter="url(#ffjoogvxj1752)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,55.9531 L27,82.9531 M14,63.9531 L40,63.9531 M27,82.9531 L14,97.9531 M27,82.9531 L40,97.9531 " fill="none" filter="url(#ffjoogvxj1752)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="1735.9561">User</text><ellipse cx="27" cy="1749.2578" fill="#E3F2FD" filter="url(#ffjoogvxj1752)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,1757.2578 L27,1784.2578 M14,1765.2578 L40,1765.2578 M27,1784.2578 L14,1799.2578 M27,1784.2578 L40,1799.2578 " fill="none" filter="url(#ffjoogvxj1752)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="98" x="330" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="337" y="105.9482">CLI Interface</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="98" x="330" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="337" y="1742.9561">CLI Interface</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="134" x="601" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="608" y="105.9482">DDNS Application</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="134" x="601" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="608" y="1742.9561">DDNS Application</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="134" x="802" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="809" y="105.9482">Update Use Case</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="134" x="802" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="809" y="1742.9561">Update Use Case</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="109" x="1047.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="1054.5" y="105.9482">DDNS Service</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="109" x="1047.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="1054.5" y="1742.9561">DDNS Service</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="125" x="1170.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="1177.5" y="105.9482">Network Service</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="125" x="1170.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="1177.5" y="1742.9561">Network Service</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="104" x="1309.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1316.5" y="105.9482">IP Repository</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="104" x="1309.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1316.5" y="1742.9561">IP Repository</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="146" x="1427.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="1434.5" y="105.9482">WebServer Handler</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="146" x="1427.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="1434.5" y="1742.9561">WebServer Handler</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="144" x="1587.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="1594.5" y="105.9482">Notification Service</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="144" x="1587.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="1594.5" y="1742.9561">Notification Service</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="92" x="1745.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1752.5" y="105.9482">File System</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="92" x="1745.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1752.5" y="1742.9561">File System</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="86" x="1851.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1858.5" y="105.9482">IP Provider</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="86" x="1851.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1858.5" y="1742.9561">IP Provider</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="93" x="1951.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="1958.5" y="105.9482">Web Server</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="30.2969" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="93" x="1951.5" y="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="1958.5" y="1742.9561">Web Server</text><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1224.25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="376" y="195.5156"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1165.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="665" y="224.6484"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1107.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="866" y="253.7813"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="1057.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1099" y="282.9141"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1230" y="312.0469"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1358.5" y="428.5781"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1358.5" y="1077.5"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1497.5" y="569.2422"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1497.5" y="685.7734"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="246.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1497.5" y="802.3047"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1656.5" y="1194.0313"/><rect fill="#FFFFFF" filter="url(#ffjoogvxj1752)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1656.5" y="1531.1641"/><rect fill="#EEEEEE" filter="url(#ffjoogvxj1752)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2065.5" x="3" y="151.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2068.5" y1="151.8164" y2="151.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2068.5" y1="154.8164" y2="154.8164"/><rect fill="#EEEEEE" filter="url(#ffjoogvxj1752)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="159" x="956.25" y="141.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="962.25" y="157.3169">DDNS Update Flow</text><polygon fill="#A80036" points="364,191.5156,374,195.5156,364,199.5156,368,195.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="370" y1="195.5156" y2="195.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="34" y="190.4497">./ddns_updater</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="line-through" textLength="119" x="134" y="190.4497">host example.com</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="257" y="190.4497">config nginx.conf</text><polygon fill="#A80036" points="653,220.6484,663,224.6484,653,228.6484,657,224.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386" x2="659" y1="224.6484" y2="224.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="393" y="219.5825">process_single_config(hostname, config)</text><polygon fill="#A80036" points="854,249.7813,864,253.7813,854,257.7813,858,253.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="675" x2="860" y1="253.7813" y2="253.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="682" y="248.7153">execute(hostname, config)</text><polygon fill="#A80036" points="1087,278.9141,1097,282.9141,1087,286.9141,1091,282.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="876" x2="1093" y1="282.9141" y2="282.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="883" y="277.8481">update_ddns(hostname, config)</text><polygon fill="#A80036" points="1218,308.0469,1228,312.0469,1218,316.0469,1222,312.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1109" x2="1224" y1="312.0469" y2="312.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="1116" y="306.981">get_public_ip()</text><polygon fill="#A80036" points="1884.5,337.1797,1894.5,341.1797,1884.5,345.1797,1888.5,341.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1240" x2="1890.5" y1="341.1797" y2="341.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1247" y="336.1138">HTTP request</text><polygon fill="#A80036" points="1251,366.3125,1241,370.3125,1251,374.3125,1247,370.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1245" x2="1895.5" y1="370.3125" y2="370.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="1257" y="365.2466">current IP</text><polygon fill="#A80036" points="1120,395.4453,1110,399.4453,1120,403.4453,1116,399.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1114" x2="1234" y1="399.4453" y2="399.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1126" y="394.3794">new_ip</text><polygon fill="#A80036" points="1346.5,424.5781,1356.5,428.5781,1346.5,432.5781,1350.5,428.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1109" x2="1352.5" y1="428.5781" y2="428.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1116" y="423.5122">load_ip(hostname)</text><polygon fill="#A80036" points="1781.5,453.7109,1791.5,457.7109,1781.5,461.7109,1785.5,457.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1368.5" x2="1787.5" y1="457.7109" y2="457.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1375.5" y="452.645">read hostname.json</text><polygon fill="#A80036" points="1379.5,482.8438,1369.5,486.8438,1379.5,490.8438,1375.5,486.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1373.5" x2="1792.5" y1="486.8438" y2="486.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="1385.5" y="481.7778">stored IP entry</text><polygon fill="#A80036" points="1120,511.9766,1110,515.9766,1120,519.9766,1116,515.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1114" x2="1362.5" y1="515.9766" y2="515.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1126" y="510.9106">old_ip</text><path d="M327.5,530.9766 L384,530.9766 L384,537.9766 L374,547.9766 L320,547.9766 L320,538.4766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="802.3906" rx="7.5" ry="7.5" style="stroke: #000000; stroke-width: 2.0;" width="1738.5" x="320" y="530.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="335" y="544.0435">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="399" y="543.187">[IP changed]</text><polygon fill="#A80036" points="1485.5,565.2422,1495.5,569.2422,1485.5,573.2422,1489.5,569.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1109" x2="1491.5" y1="569.2422" y2="569.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="1116" y="564.1763">validate_config(config)</text><polygon fill="#A80036" points="1988,594.375,1998,598.375,1988,602.375,1992,598.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1507.5" x2="1994" y1="598.375" y2="598.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1514.5" y="593.3091">nginx -t (test config)</text><polygon fill="#A80036" points="1518.5,623.5078,1508.5,627.5078,1518.5,631.5078,1514.5,627.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1512.5" x2="1999" y1="627.5078" y2="627.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="1524.5" y="622.4419">validation result</text><polygon fill="#A80036" points="1120,652.6406,1110,656.6406,1120,660.6406,1116,656.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1114" x2="1501.5" y1="656.6406" y2="656.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1126" y="651.5747">validation OK</text><polygon fill="#A80036" points="1485.5,681.7734,1495.5,685.7734,1485.5,689.7734,1489.5,685.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1109" x2="1491.5" y1="685.7734" y2="685.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1116" y="680.7075">create_backup(config)</text><polygon fill="#A80036" points="1781.5,710.9063,1791.5,714.9063,1781.5,718.9063,1785.5,714.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1507.5" x2="1787.5" y1="714.9063" y2="714.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="1514.5" y="709.8403">copy config file</text><polygon fill="#A80036" points="1518.5,740.0391,1508.5,744.0391,1518.5,748.0391,1514.5,744.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1512.5" x2="1792.5" y1="744.0391" y2="744.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="1524.5" y="738.9731">backup_path</text><polygon fill="#A80036" points="1120,769.1719,1110,773.1719,1120,777.1719,1116,773.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1114" x2="1501.5" y1="773.1719" y2="773.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1126" y="768.106">backup created</text><polygon fill="#A80036" points="1485.5,798.3047,1495.5,802.3047,1485.5,806.3047,1489.5,802.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1109" x2="1491.5" y1="802.3047" y2="802.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="325" x="1116" y="797.2388">update_allow_list(config, hostname, old_ip, new_ip)</text><polygon fill="#A80036" points="1781.5,827.4375,1791.5,831.4375,1781.5,835.4375,1785.5,831.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1507.5" x2="1787.5" y1="831.4375" y2="831.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="1514.5" y="826.3716">read config file</text><polygon fill="#A80036" points="1518.5,856.5703,1508.5,860.5703,1518.5,864.5703,1514.5,860.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1512.5" x2="1792.5" y1="860.5703" y2="860.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="1524.5" y="855.5044">config content</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1507.5" x2="1549.5" y1="889.7031" y2="889.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1549.5" x2="1549.5" y1="889.7031" y2="902.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1508.5" x2="1549.5" y1="902.7031" y2="902.7031"/><polygon fill="#A80036" points="1518.5,898.7031,1508.5,902.7031,1518.5,906.7031,1514.5,902.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1514.5" y="884.6372">replace IP in config</text><polygon fill="#A80036" points="1781.5,927.8359,1791.5,931.8359,1781.5,935.8359,1785.5,931.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1507.5" x2="1787.5" y1="931.8359" y2="931.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1514.5" y="926.77">write updated config</text><polygon fill="#A80036" points="1518.5,956.9688,1508.5,960.9688,1518.5,964.9688,1514.5,960.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1512.5" x2="1792.5" y1="960.9688" y2="960.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="1524.5" y="955.9028">write complete</text><polygon fill="#A80036" points="1988,986.1016,1998,990.1016,1988,994.1016,1992,990.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1507.5" x2="1994" y1="990.1016" y2="990.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="1514.5" y="985.0356">nginx -s reload</text><polygon fill="#A80036" points="1518.5,1015.2344,1508.5,1019.2344,1518.5,1023.2344,1514.5,1019.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1512.5" x2="1999" y1="1019.2344" y2="1019.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1524.5" y="1014.1685">reload complete</text><polygon fill="#A80036" points="1120,1044.3672,1110,1048.3672,1120,1052.3672,1116,1048.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1114" x2="1501.5" y1="1048.3672" y2="1048.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1126" y="1043.3013">update successful</text><polygon fill="#A80036" points="1346.5,1073.5,1356.5,1077.5,1346.5,1081.5,1350.5,1077.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1109" x2="1352.5" y1="1077.5" y2="1077.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="1116" y="1072.4341">store_ip(hostname, new_ip)</text><polygon fill="#A80036" points="1781.5,1102.6328,1791.5,1106.6328,1781.5,1110.6328,1785.5,1106.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1368.5" x2="1787.5" y1="1106.6328" y2="1106.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1375.5" y="1101.5669">write hostname.json</text><polygon fill="#A80036" points="1379.5,1131.7656,1369.5,1135.7656,1379.5,1139.7656,1375.5,1135.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1373.5" x2="1792.5" y1="1135.7656" y2="1135.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="1385.5" y="1130.6997">write complete</text><polygon fill="#A80036" points="1120,1160.8984,1110,1164.8984,1120,1168.8984,1116,1164.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1114" x2="1362.5" y1="1164.8984" y2="1164.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="1126" y="1159.8325">storage complete</text><polygon fill="#A80036" points="1644.5,1190.0313,1654.5,1194.0313,1644.5,1198.0313,1648.5,1194.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1109" x2="1650.5" y1="1194.0313" y2="1194.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="1116" y="1188.9653">notify_ip_change(hostname, old_ip, new_ip)</text><polygon fill="#A80036" points="397,1219.1641,387,1223.1641,397,1227.1641,393,1223.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="391" x2="1655.5" y1="1223.1641" y2="1223.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="403" y="1218.0981">print success message</text><polygon fill="#A80036" points="1120,1248.2969,1110,1252.2969,1120,1256.2969,1116,1252.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1114" x2="1660.5" y1="1252.2969" y2="1252.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="1126" y="1247.231">notification sent</text><polygon fill="#A80036" points="887,1277.4297,877,1281.4297,887,1285.4297,883,1281.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="881" x2="1098" y1="1281.4297" y2="1281.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="893" y="1276.3638">UpdateResult::Updated</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="320" x2="2058.5" y1="1290.4297" y2="1290.4297"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="325" y="1300.6401">[IP unchanged]</text><polygon fill="#A80036" points="887,1321.3672,877,1325.3672,887,1329.3672,883,1325.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="881" x2="1098" y1="1325.3672" y2="1325.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="893" y="1320.3013">UpdateResult::NoChange</text><polygon fill="#A80036" points="686,1357.5,676,1361.5,686,1365.5,682,1361.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="680" x2="870" y1="1361.5" y2="1361.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="692" y="1356.4341">Result&lt;UpdateResult&gt;</text><polygon fill="#A80036" points="397,1386.6328,387,1390.6328,397,1394.6328,393,1390.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="391" x2="669" y1="1390.6328" y2="1390.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="403" y="1385.5669">Result&lt;MultiConfigResult&gt;</text><polygon fill="#A80036" points="38,1415.7656,28,1419.7656,38,1423.7656,34,1419.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="32" x2="380" y1="1419.7656" y2="1419.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="44" y="1414.6997">Success/Error message</text><rect fill="#EEEEEE" filter="url(#ffjoogvxj1752)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2065.5" x="3" y="1448.332"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2068.5" y1="1448.332" y2="1448.332"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2068.5" y1="1451.332" y2="1451.332"/><rect fill="#EEEEEE" filter="url(#ffjoogvxj1752)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="165" x="953.25" y="1437.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="959.25" y="1453.8325">Error Handling Flow</text><path d="M1041,1483.3984 L1041,1493.3984 A7.5,7.5 0 0 0 1048.5,1500.8984 L1716.5,1500.8984 A7.5,7.5 0 0 0 1724,1493.3984 L1724,1485.8984 L1714,1475.8984 L1048.5,1475.8984 A7.5,7.5 0 0 0 1041,1483.3984 " fill="#FBFB77" filter="url(#ffjoogvxj1752)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1714,1475.8984 L1714,1482.1484 A3.75,3.75 0 0 0 1717.75,1485.8984 L1724,1485.8984 L1714,1475.8984 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1312.5" y="1492.9653">Any error in the flow</text><polygon fill="#A80036" points="1644.5,1527.1641,1654.5,1531.1641,1644.5,1535.1641,1648.5,1531.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1104" x2="1650.5" y1="1531.1641" y2="1531.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1111" y="1526.0981">notify_error(error, context)</text><polygon fill="#A80036" points="392,1556.2969,382,1560.2969,392,1564.2969,388,1560.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386" x2="1655.5" y1="1560.2969" y2="1560.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="398" y="1555.231">print error message</text><polygon fill="#A80036" points="1115,1585.4297,1105,1589.4297,1115,1593.4297,1111,1589.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1109" x2="1660.5" y1="1589.4297" y2="1589.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1121" y="1584.3638">error logged</text><polygon fill="#A80036" points="882,1614.5625,872,1618.5625,882,1622.5625,878,1618.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="876" x2="1103" y1="1618.5625" y2="1618.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="888" y="1613.4966">Err(error)</text><polygon fill="#A80036" points="681,1643.6953,671,1647.6953,681,1651.6953,677,1647.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="675" x2="870" y1="1647.6953" y2="1647.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="687" y="1642.6294">Err(error)</text><polygon fill="#A80036" points="392,1672.8281,382,1676.8281,392,1680.8281,388,1676.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="386" x2="669" y1="1676.8281" y2="1676.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="398" y="1671.7622">Err(error)</text><polygon fill="#A80036" points="38,1701.9609,28,1705.9609,38,1709.9609,34,1705.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="32" x2="380" y1="1705.9609" y2="1705.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="44" y="1700.895">Error message + exit(1)</text><!--MD5=[0fdf892bfe7a6722906403665d74c15d]
@startuml data-flow
skinparam backgroundColor #FAFAFA
skinparam roundcorner 15
skinparam sequenceActorBackgroundColor #E3F2FD
skinparam sequenceParticipantBackgroundColor #FFFFFF
skinparam sequenceParticipantBorderColor #1976D2

title DDNS Updater - Data Flow Diagram

actor User
participant "CLI Interface" as CLI
participant "DDNS Application" as App
participant "Update Use Case" as UC
participant "DDNS Service" as Service
participant "Network Service" as Network
participant "IP Repository" as Repo
participant "WebServer Handler" as Handler
participant "Notification Service" as Notify
participant "File System" as FS
participant "IP Provider" as IPProvider
participant "Web Server" as WebServer

== DDNS Update Flow ==

User -> CLI: ./ddns_updater - -host example.com - -config nginx.conf
activate CLI

CLI -> App: process_single_config(hostname, config)
activate App

App -> UC: execute(hostname, config)
activate UC

UC -> Service: update_ddns(hostname, config)
activate Service

Service -> Network: get_public_ip()
activate Network
Network -> IPProvider: HTTP request
IPProvider - -> Network: current IP
Network - -> Service: new_ip
deactivate Network

Service -> Repo: load_ip(hostname)
activate Repo
Repo -> FS: read hostname.json
FS - -> Repo: stored IP entry
Repo - -> Service: old_ip
deactivate Repo

alt IP changed
    Service -> Handler: validate_config(config)
    activate Handler
    Handler -> WebServer: nginx -t (test config)
    WebServer - -> Handler: validation result
    Handler - -> Service: validation OK
    deactivate Handler
    
    Service -> Handler: create_backup(config)
    activate Handler
    Handler -> FS: copy config file
    FS - -> Handler: backup_path
    Handler - -> Service: backup created
    deactivate Handler
    
    Service -> Handler: update_allow_list(config, hostname, old_ip, new_ip)
    activate Handler
    Handler -> FS: read config file
    FS - -> Handler: config content
    Handler -> Handler: replace IP in config
    Handler -> FS: write updated config
    FS - -> Handler: write complete
    Handler -> WebServer: nginx -s reload
    WebServer - -> Handler: reload complete
    Handler - -> Service: update successful
    deactivate Handler
    
    Service -> Repo: store_ip(hostname, new_ip)
    activate Repo
    Repo -> FS: write hostname.json
    FS - -> Repo: write complete
    Repo - -> Service: storage complete
    deactivate Repo
    
    Service -> Notify: notify_ip_change(hostname, old_ip, new_ip)
    activate Notify
    Notify -> CLI: print success message
    Notify - -> Service: notification sent
    deactivate Notify
    
    Service - -> UC: UpdateResult::Updated
else IP unchanged
    Service - -> UC: UpdateResult::NoChange
end

deactivate Service

UC - -> App: Result<UpdateResult>
deactivate UC

App - -> CLI: Result<MultiConfigResult>
deactivate App

CLI - -> User: Success/Error message
deactivate CLI

== Error Handling Flow ==

note over Service, Notify: Any error in the flow
Service -> Notify: notify_error(error, context)
activate Notify
Notify -> CLI: print error message
Notify - -> Service: error logged
deactivate Notify

Service - -> UC: Err(error)
UC - -> App: Err(error)
App - -> CLI: Err(error)
CLI - -> User: Error message + exit(1)

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.28+6
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>