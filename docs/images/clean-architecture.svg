<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1264px" preserveAspectRatio="none" style="width:6586px;height:1264px;background:#FAFAFA;" version="1.1" viewBox="0 0 6586 1264" width="6586px" zoomAndPan="magnify"><defs><filter height="300%" id="fh4tnzgxbbamm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="379" x="3109.5" y="16.708">DDNS Updater - Clean Architecture Layers</text><!--MD5=[a59c1d05a8f6fb54290705d41e67acbe]
cluster interface--><polygon fill="#E1F5FE" filter="url(#fh4tnzgxbbamm)" points="1283,44.9531,1409,44.9531,1416,67.25,1767,67.25,1767,398.4531,1283,398.4531,1283,44.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1283" x2="1416" y1="67.25" y2="67.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="1287" y="59.9482">Interface Layer</text><!--MD5=[3ff016c1aa5003d713567a073e2181a6]
cluster application--><polygon fill="#F3E5F5" filter="url(#fh4tnzgxbbamm)" points="1791,190.9531,1933,190.9531,1940,213.25,3931,213.25,3931,576.9531,1791,576.9531,1791,190.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1791" x2="1940" y1="213.25" y2="213.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="1795" y="205.9482">Application Layer</text><!--MD5=[27f772719433d509ddbc20ff768eba08]
cluster domain--><polygon fill="#E8F5E8" filter="url(#fh4tnzgxbbamm)" points="2955,600.9531,3068,600.9531,3075,623.25,6564,623.25,6564,1252.9531,2955,1252.9531,2955,600.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2955" x2="3075" y1="623.25" y2="623.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="2959" y="615.9482">Domain Layer</text><!--MD5=[114f4823940f317c08f5bedd633c9afd]
cluster Entities--><polygon fill="#E3F2FD" filter="url(#fh4tnzgxbbamm)" points="5731,868.9531,5795,868.9531,5802,891.25,6540,891.25,6540,1228.9531,5731,1228.9531,5731,868.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="5731" x2="5802" y1="891.25" y2="891.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="5735" y="883.9482">Entities</text><!--MD5=[cdfd548b3455e70392372b1f27091970]
cluster Services--><polygon fill="#E3F2FD" filter="url(#fh4tnzgxbbamm)" points="4609,643.9531,4683,643.9531,4690,666.25,5343,666.25,5343,844.9531,4609,844.9531,4609,643.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="4609" x2="4690" y1="666.25" y2="666.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="4613" y="658.9482">Services</text><!--MD5=[33547aab9a37fff93e77e1ef2ce5d818]
cluster Ports--><polygon fill="#E3F2FD" filter="url(#fh4tnzgxbbamm)" points="2979,887.9531,3027,887.9531,3034,910.25,5707,910.25,5707,1050.9531,2979,1050.9531,2979,887.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2979" x2="3034" y1="910.25" y2="910.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="2983" y="902.9482">Ports</text><!--MD5=[77349be1bd27b81b697a0f9b3aded3c8]
cluster infrastructure--><polygon fill="#FFF3E0" filter="url(#fh4tnzgxbbamm)" points="22,656.4531,187,656.4531,194,678.75,2931,678.75,2931,832.4531,22,832.4531,22,656.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="194" y1="678.75" y2="678.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="26" y="671.4482">Infrastructure Layer</text><!--MD5=[ac9205e7dd97975140996cd7bb86d7d0]
class CliInterface--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="86.4141" id="CliInterface" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="453" x="1298.5" y="79.9531"/><ellipse cx="1485.75" cy="95.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M1488.7188,101.5938 Q1488.1406,101.8906 1487.5,102.0313 Q1486.8594,102.1875 1486.1563,102.1875 Q1483.6563,102.1875 1482.3281,100.5469 Q1481.0156,98.8906 1481.0156,95.7656 Q1481.0156,92.6406 1482.3281,90.9844 Q1483.6563,89.3281 1486.1563,89.3281 Q1486.8594,89.3281 1487.5,89.4844 Q1488.1563,89.6406 1488.7188,89.9375 L1488.7188,92.6563 Q1488.0938,92.0781 1487.5,91.8125 Q1486.9063,91.5313 1486.2813,91.5313 Q1484.9375,91.5313 1484.25,92.6094 Q1483.5625,93.6719 1483.5625,95.7656 Q1483.5625,97.8594 1484.25,98.9375 Q1484.9375,100 1486.2813,100 Q1486.9063,100 1487.5,99.7344 Q1488.0938,99.4531 1488.7188,98.875 L1488.7188,101.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="1506.25" y="100.1074">CliInterface</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1299.5" x2="1750.5" y1="111.9531" y2="111.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1299.5" x2="1750.5" y1="119.9531" y2="119.9531"/><ellipse cx="1309.5" cy="130.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="1318.5" y="134.1636">run(): Result&lt;(), Error&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1306.5" y="140.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="1318.5" y="146.9683">run_async(args: Args): Result&lt;(), Error&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1306.5" y="153.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="427" x="1318.5" y="159.7729">display_results(hostname: &amp;str, result: &amp;MultiConfigResult, verbose: bool)</text><!--MD5=[91a7f14c65639ba516a14b4649f07adf]
class Args--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="150.4375" id="Args" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="203" x="1423.5" y="232.4531"/><ellipse cx="1506.75" cy="248.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M1509.7188,254.0938 Q1509.1406,254.3906 1508.5,254.5313 Q1507.8594,254.6875 1507.1563,254.6875 Q1504.6563,254.6875 1503.3281,253.0469 Q1502.0156,251.3906 1502.0156,248.2656 Q1502.0156,245.1406 1503.3281,243.4844 Q1504.6563,241.8281 1507.1563,241.8281 Q1507.8594,241.8281 1508.5,241.9844 Q1509.1563,242.1406 1509.7188,242.4375 L1509.7188,245.1563 Q1509.0938,244.5781 1508.5,244.3125 Q1507.9063,244.0313 1507.2813,244.0313 Q1505.9375,244.0313 1505.25,245.1094 Q1504.5625,246.1719 1504.5625,248.2656 Q1504.5625,250.3594 1505.25,251.4375 Q1505.9375,252.5 1507.2813,252.5 Q1507.9063,252.5 1508.5,252.2344 Q1509.0938,251.9531 1509.7188,251.375 L1509.7188,254.0938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="1527.25" y="252.6074">Args</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1424.5" x2="1625.5" y1="264.4531" y2="264.4531"/><ellipse cx="1434.5" cy="275.4531" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="1443.5" y="278.6636">host: String</text><ellipse cx="1434.5" cy="288.2578" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="1443.5" y="291.4683">nginx_config: Option&lt;PathBuf&gt;</text><ellipse cx="1434.5" cy="301.0625" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="1443.5" y="304.2729">config_dir: Option&lt;PathBuf&gt;</text><ellipse cx="1434.5" cy="313.8672" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="1443.5" y="317.0776">pattern: String</text><ellipse cx="1434.5" cy="326.6719" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="1443.5" y="329.8823">backup_dir: Option&lt;PathBuf&gt;</text><ellipse cx="1434.5" cy="339.4766" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="1443.5" y="342.687">no_reload: bool</text><ellipse cx="1434.5" cy="352.2813" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="1443.5" y="355.4917">verbose: bool</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1424.5" x2="1625.5" y1="362.0859" y2="362.0859"/><ellipse cx="1434.5" cy="373.0859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="1443.5" y="376.2964">parse_args(): Args</text><!--MD5=[906e2290ae80f3ee0da4367965b379ad]
class DdnsApplication--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="163.2422" id="DdnsApplication" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="656" x="2308" y="225.9531"/><ellipse cx="2581.25" cy="241.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M2584.2188,247.5938 Q2583.6406,247.8906 2583,248.0313 Q2582.3594,248.1875 2581.6563,248.1875 Q2579.1563,248.1875 2577.8281,246.5469 Q2576.5156,244.8906 2576.5156,241.7656 Q2576.5156,238.6406 2577.8281,236.9844 Q2579.1563,235.3281 2581.6563,235.3281 Q2582.3594,235.3281 2583,235.4844 Q2583.6563,235.6406 2584.2188,235.9375 L2584.2188,238.6563 Q2583.5938,238.0781 2583,237.8125 Q2582.4063,237.5313 2581.7813,237.5313 Q2580.4375,237.5313 2579.75,238.6094 Q2579.0625,239.6719 2579.0625,241.7656 Q2579.0625,243.8594 2579.75,244.9375 Q2580.4375,246 2581.7813,246 Q2582.4063,246 2583,245.7344 Q2583.5938,245.4531 2584.2188,244.875 L2584.2188,247.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="2601.75" y="246.1074">DdnsApplication</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2309" x2="2963" y1="257.9531" y2="257.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2316" y="265.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2328" y="272.1636">config: AppConfig</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2316" y="278.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="2328" y="284.9683">ip_repository: Arc&lt;dyn IpRepository&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2316" y="291.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="248" x="2328" y="297.7729">network_service: Arc&lt;dyn NetworkService&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2316" y="304.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="2328" y="310.5776">notification_service: Arc&lt;dyn NotificationService&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2316" y="317.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="295" x="2328" y="323.3823">config_discovery: Arc&lt;dyn ConfigDiscoveryService&gt;</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2309" x2="2963" y1="329.9766" y2="329.9766"/><ellipse cx="2319" cy="340.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="2328" y="344.187">new(config: AppConfig): Result&lt;Self, Error&gt;</text><ellipse cx="2319" cy="353.7813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="555" x="2328" y="356.9917">process_single_config(hostname: &amp;str, config: &amp;WebServerConfig): Result&lt;UpdateResult, Error&gt;</text><ellipse cx="2319" cy="366.5859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="630" x="2328" y="369.7964">process_multiple_configs(hostname: &amp;str, configs: Vec&lt;WebServerConfig&gt;): Result&lt;MultiConfigResult, Error&gt;</text><ellipse cx="2319" cy="379.3906" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="489" x="2328" y="382.6011">validate_configs(configs: &amp;[WebServerConfig]): Result&lt;Vec&lt;ValidationResult&gt;, Error&gt;</text><!--MD5=[5daa644343afe4eb42647b6366ea4ca8]
class ServiceFactory--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="112.0234" id="ServiceFactory" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="703" x="1806.5" y="448.9531"/><ellipse cx="2108.25" cy="464.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M2111.2188,470.5938 Q2110.6406,470.8906 2110,471.0313 Q2109.3594,471.1875 2108.6563,471.1875 Q2106.1563,471.1875 2104.8281,469.5469 Q2103.5156,467.8906 2103.5156,464.7656 Q2103.5156,461.6406 2104.8281,459.9844 Q2106.1563,458.3281 2108.6563,458.3281 Q2109.3594,458.3281 2110,458.4844 Q2110.6563,458.6406 2111.2188,458.9375 L2111.2188,461.6563 Q2110.5938,461.0781 2110,460.8125 Q2109.4063,460.5313 2108.7813,460.5313 Q2107.4375,460.5313 2106.75,461.6094 Q2106.0625,462.6719 2106.0625,464.7656 Q2106.0625,466.8594 2106.75,467.9375 Q2107.4375,469 2108.7813,469 Q2109.4063,469 2110,468.7344 Q2110.5938,468.4531 2111.2188,467.875 L2111.2188,470.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="2128.75" y="469.1074">ServiceFactory</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1807.5" x2="2508.5" y1="480.9531" y2="480.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1807.5" x2="2508.5" y1="488.9531" y2="488.9531"/><ellipse cx="1817.5" cy="499.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="469" x="1826.5" y="503.1636">create_ip_repository(storage_dir: PathBuf): Result&lt;Arc&lt;dyn IpRepository&gt;, Error&gt;</text><ellipse cx="1817.5" cy="512.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="677" x="1826.5" y="515.9683">create_web_server_handler(server_type: WebServerType, backup_dir: Option&lt;PathBuf&gt;): Arc&lt;dyn WebServerHandler&gt;</text><ellipse cx="1817.5" cy="525.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="298" x="1826.5" y="528.7729">create_network_service(): Arc&lt;dyn NetworkService&gt;</text><ellipse cx="1817.5" cy="538.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="410" x="1826.5" y="541.5776">create_notification_service(verbose: bool): Arc&lt;dyn NotificationService&gt;</text><ellipse cx="1817.5" cy="551.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="392" x="1826.5" y="554.3823">create_config_discovery_service(): Arc&lt;dyn ConfigDiscoveryService&gt;</text><!--MD5=[d827b13ba8cefec3a92ba0e8442d287e]
class UpdateDdnsUseCase--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="99.2188" id="UpdateDdnsUseCase" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="1141" x="2544.5" y="455.4531"/><ellipse cx="3044.25" cy="471.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M3047.2188,477.0938 Q3046.6406,477.3906 3046,477.5313 Q3045.3594,477.6875 3044.6563,477.6875 Q3042.1563,477.6875 3040.8281,476.0469 Q3039.5156,474.3906 3039.5156,471.2656 Q3039.5156,468.1406 3040.8281,466.4844 Q3042.1563,464.8281 3044.6563,464.8281 Q3045.3594,464.8281 3046,464.9844 Q3046.6563,465.1406 3047.2188,465.4375 L3047.2188,468.1563 Q3046.5938,467.5781 3046,467.3125 Q3045.4063,467.0313 3044.7813,467.0313 Q3043.4375,467.0313 3042.75,468.1094 Q3042.0625,469.1719 3042.0625,471.2656 Q3042.0625,473.3594 3042.75,474.4375 Q3043.4375,475.5 3044.7813,475.5 Q3045.4063,475.5 3046,475.2344 Q3046.5938,474.9531 3047.2188,474.375 L3047.2188,477.0938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="3064.75" y="475.6074">UpdateDdnsUseCase</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2545.5" x2="3684.5" y1="487.4531" y2="487.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2552.5" y="495.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="2564.5" y="501.6636">service: DdnsUpdateService</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2545.5" x2="3684.5" y1="508.2578" y2="508.2578"/><ellipse cx="2555.5" cy="519.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="1115" x="2564.5" y="522.4683">new(ip_repository: Arc&lt;dyn IpRepository&gt;, web_server_handler: Arc&lt;dyn WebServerHandler&gt;, network_service: Arc&lt;dyn NetworkService&gt;, notification_service: Arc&lt;dyn NotificationService&gt;): Self</text><ellipse cx="2555.5" cy="532.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="473" x="2564.5" y="535.2729">execute(hostname: &amp;str, config: &amp;WebServerConfig): Result&lt;UpdateResult, Error&gt;</text><ellipse cx="2555.5" cy="544.8672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="646" x="2564.5" y="548.0776">execute_with_options(hostname: &amp;str, config: &amp;WebServerConfig, no_reload: bool): Result&lt;UpdateResult, Error&gt;</text><!--MD5=[2cfa5de1e9301cee7536fbd36131ba59]
class AppConfig--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="112.0234" id="AppConfig" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="194" x="3721" y="448.9531"/><ellipse cx="3782.25" cy="464.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M3785.2188,470.5938 Q3784.6406,470.8906 3784,471.0313 Q3783.3594,471.1875 3782.6563,471.1875 Q3780.1563,471.1875 3778.8281,469.5469 Q3777.5156,467.8906 3777.5156,464.7656 Q3777.5156,461.6406 3778.8281,459.9844 Q3780.1563,458.3281 3782.6563,458.3281 Q3783.3594,458.3281 3784,458.4844 Q3784.6563,458.6406 3785.2188,458.9375 L3785.2188,461.6563 Q3784.5938,461.0781 3784,460.8125 Q3783.4063,460.5313 3782.7813,460.5313 Q3781.4375,460.5313 3780.75,461.6094 Q3780.0625,462.6719 3780.0625,464.7656 Q3780.0625,466.8594 3780.75,467.9375 Q3781.4375,469 3782.7813,469 Q3783.4063,469 3784,468.7344 Q3784.5938,468.4531 3785.2188,467.875 L3785.2188,470.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="3802.75" y="469.1074">AppConfig</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="3722" x2="3914" y1="480.9531" y2="480.9531"/><ellipse cx="3732" cy="491.9531" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="3741" y="495.1636">storage_dir: PathBuf</text><ellipse cx="3732" cy="504.7578" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="3741" y="507.9683">server_type: WebServerType</text><ellipse cx="3732" cy="517.5625" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="3741" y="520.7729">backup_dir: Option&lt;PathBuf&gt;</text><ellipse cx="3732" cy="530.3672" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="3741" y="533.5776">no_reload: bool</text><ellipse cx="3732" cy="543.1719" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="3741" y="546.3823">verbose: bool</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="3722" x2="3914" y1="552.9766" y2="552.9766"/><!--MD5=[b1fefd266b956596041ae34c3f312932]
class IpEntry--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="150.4375" id="IpEntry" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="406" x="6118" y="903.9531"/><ellipse cx="6295.25" cy="919.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M6298.2188,925.5938 Q6297.6406,925.8906 6297,926.0313 Q6296.3594,926.1875 6295.6563,926.1875 Q6293.1563,926.1875 6291.8281,924.5469 Q6290.5156,922.8906 6290.5156,919.7656 Q6290.5156,916.6406 6291.8281,914.9844 Q6293.1563,913.3281 6295.6563,913.3281 Q6296.3594,913.3281 6297,913.4844 Q6297.6563,913.6406 6298.2188,913.9375 L6298.2188,916.6563 Q6297.5938,916.0781 6297,915.8125 Q6296.4063,915.5313 6295.7813,915.5313 Q6294.4375,915.5313 6293.75,916.6094 Q6293.0625,917.6719 6293.0625,919.7656 Q6293.0625,921.8594 6293.75,922.9375 Q6294.4375,924 6295.7813,924 Q6296.4063,924 6297,923.7344 Q6297.5938,923.4531 6298.2188,922.875 L6298.2188,925.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="6315.75" y="924.1074">IpEntry</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="6119" x2="6523" y1="935.9531" y2="935.9531"/><ellipse cx="6129" cy="946.9531" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="6138" y="950.1636">ip: IpAddr</text><ellipse cx="6129" cy="959.7578" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="6138" y="962.9683">hostname: String</text><ellipse cx="6129" cy="972.5625" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="6138" y="975.7729">comment: Option&lt;String&gt;</text><ellipse cx="6129" cy="985.3672" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="6138" y="988.5776">created_at: DateTime&lt;Utc&gt;</text><ellipse cx="6129" cy="998.1719" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="6138" y="1001.3823">updated_at: DateTime&lt;Utc&gt;</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="6119" x2="6523" y1="1007.9766" y2="1007.9766"/><ellipse cx="6129" cy="1018.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="380" x="6138" y="1022.187">new(ip: IpAddr, hostname: String, comment: Option&lt;String&gt;): Self</text><ellipse cx="6129" cy="1031.7813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="6138" y="1034.9917">update_ip(new_ip: IpAddr)</text><ellipse cx="6129" cy="1044.5859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="256" x="6138" y="1047.7964">update_comment(comment: Option&lt;String&gt;)</text><!--MD5=[244f8c150f4a16cf7593202ad0f554b4]
class WebServerConfig--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="99.2188" id="WebServerConfig" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="335" x="5747.5" y="929.4531"/><ellipse cx="5857.75" cy="945.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M5860.7188,951.0938 Q5860.1406,951.3906 5859.5,951.5313 Q5858.8594,951.6875 5858.1563,951.6875 Q5855.6563,951.6875 5854.3281,950.0469 Q5853.0156,948.3906 5853.0156,945.2656 Q5853.0156,942.1406 5854.3281,940.4844 Q5855.6563,938.8281 5858.1563,938.8281 Q5858.8594,938.8281 5859.5,938.9844 Q5860.1563,939.1406 5860.7188,939.4375 L5860.7188,942.1563 Q5860.0938,941.5781 5859.5,941.3125 Q5858.9063,941.0313 5858.2813,941.0313 Q5856.9375,941.0313 5856.25,942.1094 Q5855.5625,943.1719 5855.5625,945.2656 Q5855.5625,947.3594 5856.25,948.4375 Q5856.9375,949.5 5858.2813,949.5 Q5858.9063,949.5 5859.5,949.2344 Q5860.0938,948.9531 5860.7188,948.375 L5860.7188,951.0938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="5878.25" y="949.6074">WebServerConfig</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="5748.5" x2="6081.5" y1="961.4531" y2="961.4531"/><ellipse cx="5758.5" cy="972.4531" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="5767.5" y="975.6636">path: PathBuf</text><ellipse cx="5758.5" cy="985.2578" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="5767.5" y="988.4683">server_type: WebServerType</text><ellipse cx="5758.5" cy="998.0625" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="5767.5" y="1001.2729">backup_path: Option&lt;PathBuf&gt;</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="5748.5" x2="6081.5" y1="1007.8672" y2="1007.8672"/><ellipse cx="5758.5" cy="1018.8672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="309" x="5767.5" y="1022.0776">new(path: PathBuf, server_type: WebServerType): Self</text><!--MD5=[29c00152104c68c8a8c3147f62e75cc9]
class WebServerType--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="99.2188" id="WebServerType" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="128" x="5851" y="1113.9531"/><ellipse cx="5866" cy="1129.9531" fill="#EB937F" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M5870.1094,1135.9531 L5862.3906,1135.9531 L5862.3906,1123.5625 L5870.1094,1123.5625 L5870.1094,1125.7188 L5864.8438,1125.7188 L5864.8438,1128.3906 L5869.6094,1128.3906 L5869.6094,1130.5469 L5864.8438,1130.5469 L5864.8438,1133.7969 L5870.1094,1133.7969 L5870.1094,1135.9531 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="5880" y="1134.1074">WebServerType</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="5852" x2="5978" y1="1145.9531" y2="1145.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="5857" y="1160.1636">Nginx</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="5857" y="1172.9683">Apache</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="5857" y="1185.7729">Caddy</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="5857" y="1198.5776">Traefik</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="5852" x2="5978" y1="1205.1719" y2="1205.1719"/><!--MD5=[80579822363f2039a429b81ed985cabd]
class DdnsUpdateService--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="150.4375" id="DdnsUpdateService" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="701" x="4625.5" y="678.9531"/><ellipse cx="4910.25" cy="694.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M4913.2188,700.5938 Q4912.6406,700.8906 4912,701.0313 Q4911.3594,701.1875 4910.6563,701.1875 Q4908.1563,701.1875 4906.8281,699.5469 Q4905.5156,697.8906 4905.5156,694.7656 Q4905.5156,691.6406 4906.8281,689.9844 Q4908.1563,688.3281 4910.6563,688.3281 Q4911.3594,688.3281 4912,688.4844 Q4912.6563,688.6406 4913.2188,688.9375 L4913.2188,691.6563 Q4912.5938,691.0781 4912,690.8125 Q4911.4063,690.5313 4910.7813,690.5313 Q4909.4375,690.5313 4908.75,691.6094 Q4908.0625,692.6719 4908.0625,694.7656 Q4908.0625,696.8594 4908.75,697.9375 Q4909.4375,699 4910.7813,699 Q4911.4063,699 4912,698.7344 Q4912.5938,698.4531 4913.2188,697.875 L4913.2188,700.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="123" x="4930.75" y="699.1074">DdnsUpdateService</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="4626.5" x2="5325.5" y1="710.9531" y2="710.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="4633.5" y="718.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="4645.5" y="725.1636">ip_repository: Arc&lt;dyn IpRepository&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="4633.5" y="731.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="288" x="4645.5" y="737.9683">web_server_handler: Arc&lt;dyn WebServerHandler&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="4633.5" y="744.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="248" x="4645.5" y="750.7729">network_service: Arc&lt;dyn NetworkService&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="4633.5" y="757.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="4645.5" y="763.5776">notification_service: Arc&lt;dyn NotificationService&gt;</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="4626.5" x2="5325.5" y1="770.1719" y2="770.1719"/><ellipse cx="4636.5" cy="781.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="4645.5" y="784.3823">new(...): Self</text><ellipse cx="4636.5" cy="793.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="502" x="4645.5" y="797.187">update_ddns(hostname: &amp;str, config: &amp;WebServerConfig): Result&lt;UpdateResult, Error&gt;</text><ellipse cx="4636.5" cy="806.7813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="675" x="4645.5" y="809.9917">update_ddns_with_options(hostname: &amp;str, config: &amp;WebServerConfig, no_reload: bool): Result&lt;UpdateResult, Error&gt;</text><ellipse cx="4636.5" cy="819.5859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="246" x="4645.5" y="822.7964">list_entries(): Result&lt;Vec&lt;IpEntry&gt;, Error&gt;</text><!--MD5=[9e0b7181fe723359a16c276eb6afe208]
class IpRepository--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="112.0234" id="IpRepository" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="386" x="4277" y="922.9531"/><ellipse cx="4426.75" cy="938.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M4422.6719,934.7188 L4422.6719,932.5625 L4430.0625,932.5625 L4430.0625,934.7188 L4427.5938,934.7188 L4427.5938,942.7969 L4430.0625,942.7969 L4430.0625,944.9531 L4422.6719,944.9531 L4422.6719,942.7969 L4425.1406,942.7969 L4425.1406,934.7188 L4422.6719,934.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="4447.25" y="943.1074">IpRepository</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="4278" x2="4662" y1="954.9531" y2="954.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="4278" x2="4662" y1="962.9531" y2="962.9531"/><ellipse cx="4288" cy="973.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="313" x="4297" y="977.1636">store_ip(hostname: &amp;str, ip: IpAddr): Result&lt;(), Error&gt;</text><ellipse cx="4288" cy="986.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="328" x="4297" y="989.9683">load_ip(hostname: &amp;str): Result&lt;Option&lt;IpAddr&gt;, Error&gt;</text><ellipse cx="4288" cy="999.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="360" x="4297" y="1002.7729">get_ip_entry(hostname: &amp;str): Result&lt;Option&lt;IpEntry&gt;, Error&gt;</text><ellipse cx="4288" cy="1012.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="265" x="4297" y="1015.5776">list_all_entries(): Result&lt;Vec&lt;IpEntry&gt;, Error&gt;</text><ellipse cx="4288" cy="1025.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="291" x="4297" y="1028.3823">delete_entry(hostname: &amp;str): Result&lt;bool, Error&gt;</text><!--MD5=[06aeaf1cc95231c95d872fd1cdb2336e]
class WebServerHandler--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="112.0234" id="WebServerHandler" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="732" x="3510" y="922.9531"/><ellipse cx="3813.25" cy="938.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M3809.1719,934.7188 L3809.1719,932.5625 L3816.5625,932.5625 L3816.5625,934.7188 L3814.0938,934.7188 L3814.0938,942.7969 L3816.5625,942.7969 L3816.5625,944.9531 L3809.1719,944.9531 L3809.1719,942.7969 L3811.6406,942.7969 L3811.6406,934.7188 L3809.1719,934.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="3833.75" y="943.1074">WebServerHandler</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="3511" x2="4241" y1="954.9531" y2="954.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="3511" x2="4241" y1="962.9531" y2="962.9531"/><ellipse cx="3521" cy="973.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="706" x="3530" y="977.1636">update_allow_list(config: &amp;WebServerConfig, hostname: &amp;str, old_ip: Option&lt;IpAddr&gt;, new_ip: IpAddr): Result&lt;bool, Error&gt;</text><ellipse cx="3521" cy="986.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="347" x="3530" y="989.9683">validate_config(config: &amp;WebServerConfig): Result&lt;(), Error&gt;</text><ellipse cx="3521" cy="999.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="381" x="3530" y="1002.7729">create_backup(config: &amp;WebServerConfig): Result&lt;PathBuf, Error&gt;</text><ellipse cx="3521" cy="1012.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="381" x="3530" y="1015.5776">test_configuration(config: &amp;WebServerConfig): Result&lt;bool, Error&gt;</text><ellipse cx="3521" cy="1025.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="3530" y="1028.3823">reload_server(): Result&lt;(), Error&gt;</text><!--MD5=[01b8cfbf84e97104245b5fe6a951cf2b]
class NetworkService--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="86.4141" id="NetworkService" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="402" x="5289" y="935.9531"/><ellipse cx="5437.25" cy="951.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M5433.1719,947.7188 L5433.1719,945.5625 L5440.5625,945.5625 L5440.5625,947.7188 L5438.0938,947.7188 L5438.0938,955.7969 L5440.5625,955.7969 L5440.5625,957.9531 L5433.1719,957.9531 L5433.1719,955.7969 L5435.6406,955.7969 L5435.6406,947.7188 L5433.1719,947.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="97" x="5457.75" y="956.1074">NetworkService</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="5290" x2="5690" y1="967.9531" y2="967.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="5290" x2="5690" y1="975.9531" y2="975.9531"/><ellipse cx="5300" cy="986.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="5309" y="990.1636">get_public_ip(): Result&lt;IpAddr, Error&gt;</text><ellipse cx="5300" cy="999.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="376" x="5309" y="1002.9683">resolve_hostname(hostname: &amp;str): Result&lt;Vec&lt;IpAddr&gt;, Error&gt;</text><ellipse cx="5300" cy="1012.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="256" x="5309" y="1015.7729">is_reachable(ip: IpAddr): Result&lt;bool, Error&gt;</text><!--MD5=[19396e60fc58e3e432547cabb13c74da]
class NotificationService--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="73.6094" id="NotificationService" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="556" x="4698" y="941.9531"/><ellipse cx="4913.75" cy="957.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M4909.6719,953.7188 L4909.6719,951.5625 L4917.0625,951.5625 L4917.0625,953.7188 L4914.5938,953.7188 L4914.5938,961.7969 L4917.0625,961.7969 L4917.0625,963.9531 L4909.6719,963.9531 L4909.6719,961.7969 L4912.1406,961.7969 L4912.1406,953.7188 L4909.6719,953.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="4934.25" y="962.1074">NotificationService</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="4699" x2="5253" y1="973.9531" y2="973.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="4699" x2="5253" y1="981.9531" y2="981.9531"/><ellipse cx="4709" cy="992.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="530" x="4718" y="996.1636">notify_ip_change(hostname: &amp;str, old_ip: Option&lt;IpAddr&gt;, new_ip: IpAddr): Result&lt;(), Error&gt;</text><ellipse cx="4709" cy="1005.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="227" x="4718" y="1008.9683">notify_error(error: &amp;str, context: Option</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="4945" y="1008.9683">): Result&lt;(), Error&gt;</text><!--MD5=[b1d5423ca5c6d3717e754cb6a3197ba2]
class ConfigDiscoveryService--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="73.6094" id="ConfigDiscoveryService" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="479" x="2995.5" y="941.9531"/><ellipse cx="3159.25" cy="957.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M3155.1719,953.7188 L3155.1719,951.5625 L3162.5625,951.5625 L3162.5625,953.7188 L3160.0938,953.7188 L3160.0938,961.7969 L3162.5625,961.7969 L3162.5625,963.9531 L3155.1719,963.9531 L3155.1719,961.7969 L3157.6406,961.7969 L3157.6406,953.7188 L3155.1719,953.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="143" x="3179.75" y="962.1074">ConfigDiscoveryService</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2996.5" x2="3473.5" y1="973.9531" y2="973.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2996.5" x2="3473.5" y1="981.9531" y2="981.9531"/><ellipse cx="3006.5" cy="992.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="3015.5" y="996.1636">discover_configs(pattern: Option</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="237" x="3200.5" y="996.1636">): Result&lt;Vec&lt;WebServerConfig&gt;, Error&gt;</text><ellipse cx="3006.5" cy="1005.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="453" x="3015.5" y="1008.9683">detect_server_type(config_path: &amp;Path): Result&lt;WebServerType, DomainError&gt;</text><!--MD5=[6c9d36840dc254aee04efa5ef6de4e15]
class FileIpRepository--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="86.4141" id="FileIpRepository" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="294" x="2011" y="710.9531"/><ellipse cx="2104.75" cy="726.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M2107.7188,732.5938 Q2107.1406,732.8906 2106.5,733.0313 Q2105.8594,733.1875 2105.1563,733.1875 Q2102.6563,733.1875 2101.3281,731.5469 Q2100.0156,729.8906 2100.0156,726.7656 Q2100.0156,723.6406 2101.3281,721.9844 Q2102.6563,720.3281 2105.1563,720.3281 Q2105.8594,720.3281 2106.5,720.4844 Q2107.1563,720.6406 2107.7188,720.9375 L2107.7188,723.6563 Q2107.0938,723.0781 2106.5,722.8125 Q2105.9063,722.5313 2105.2813,722.5313 Q2103.9375,722.5313 2103.25,723.6094 Q2102.5625,724.6719 2102.5625,726.7656 Q2102.5625,728.8594 2103.25,729.9375 Q2103.9375,731 2105.2813,731 Q2105.9063,731 2106.5,730.7344 Q2107.0938,730.4531 2107.7188,729.875 L2107.7188,732.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2125.25" y="731.1074">FileIpRepository</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2012" x2="2304" y1="742.9531" y2="742.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2019" y="750.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="2031" y="757.1636">storage_dir: PathBuf</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2012" x2="2304" y1="763.7578" y2="763.7578"/><ellipse cx="2022" cy="774.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="268" x="2031" y="777.9683">new(storage_dir: PathBuf): Result&lt;Self, Error&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2019" y="784.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="2031" y="790.7729">get_file_path(hostname: &amp;str): PathBuf</text><!--MD5=[a73902e2dcbc125d92d722a3f9dfae06]
class NginxHandler--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="124.8281" id="NginxHandler" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="709" x="1266.5" y="691.4531"/><ellipse cx="1575.25" cy="707.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M1578.2188,713.0938 Q1577.6406,713.3906 1577,713.5313 Q1576.3594,713.6875 1575.6563,713.6875 Q1573.1563,713.6875 1571.8281,712.0469 Q1570.5156,710.3906 1570.5156,707.2656 Q1570.5156,704.1406 1571.8281,702.4844 Q1573.1563,700.8281 1575.6563,700.8281 Q1576.3594,700.8281 1577,700.9844 Q1577.6563,701.1406 1578.2188,701.4375 L1578.2188,704.1563 Q1577.5938,703.5781 1577,703.3125 Q1576.4063,703.0313 1575.7813,703.0313 Q1574.4375,703.0313 1573.75,704.1094 Q1573.0625,705.1719 1573.0625,707.2656 Q1573.0625,709.3594 1573.75,710.4375 Q1574.4375,711.5 1575.7813,711.5 Q1576.4063,711.5 1577,711.2344 Q1577.5938,710.9531 1578.2188,710.375 L1578.2188,713.0938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="1595.75" y="711.6074">NginxHandler</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1267.5" x2="1974.5" y1="723.4531" y2="723.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1274.5" y="731.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="1286.5" y="737.6636">backup_dir: Option&lt;PathBuf&gt;</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="1267.5" x2="1974.5" y1="744.2578" y2="744.2578"/><ellipse cx="1277.5" cy="755.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="1286.5" y="758.4683">new(): Self</text><ellipse cx="1277.5" cy="768.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="296" x="1286.5" y="771.2729">with_backup_dir(backup_dir: Option&lt;PathBuf&gt;): Self</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1274.5" y="777.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="683" x="1286.5" y="784.0776">update_nginx_config(config_path: &amp;Path, hostname: &amp;str, old_ip: Option&lt;IpAddr&gt;, new_ip: IpAddr): Result&lt;bool, Error&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1274.5" y="790.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="306" x="1286.5" y="796.8823">validate_config(config_path: &amp;Path): Result&lt;(), Error&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1274.5" y="803.4766"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="1286.5" y="809.687">validate_nginx_structure(content: &amp;str): bool</text><!--MD5=[4bad631e2e1d7649d9153c94ee95ad76]
class ApacheHandler--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="73.6094" id="ApacheHandler" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="720" x="511" y="716.9531"/><ellipse cx="818.75" cy="732.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M821.7188,738.5938 Q821.1406,738.8906 820.5,739.0313 Q819.8594,739.1875 819.1563,739.1875 Q816.6563,739.1875 815.3281,737.5469 Q814.0156,735.8906 814.0156,732.7656 Q814.0156,729.6406 815.3281,727.9844 Q816.6563,726.3281 819.1563,726.3281 Q819.8594,726.3281 820.5,726.4844 Q821.1563,726.6406 821.7188,726.9375 L821.7188,729.6563 Q821.0938,729.0781 820.5,728.8125 Q819.9063,728.5313 819.2813,728.5313 Q817.9375,728.5313 817.25,729.6094 Q816.5625,730.6719 816.5625,732.7656 Q816.5625,734.8594 817.25,735.9375 Q817.9375,737 819.2813,737 Q819.9063,737 820.5,736.7344 Q821.0938,736.4531 821.7188,735.875 L821.7188,738.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="839.25" y="737.1074">ApacheHandler</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="512" x2="1230" y1="748.9531" y2="748.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="512" x2="1230" y1="756.9531" y2="756.9531"/><ellipse cx="522" cy="767.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="531" y="771.1636">new(): Self</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="519" y="777.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="694" x="531" y="783.9683">update_apache_config(config_path: &amp;Path, hostname: &amp;str, old_ip: Option&lt;IpAddr&gt;, new_ip: IpAddr): Result&lt;bool, Error&gt;</text><!--MD5=[02709614060eae2b46a5a5a11361e828]
class HttpNetworkService--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="73.6094" id="HttpNetworkService" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="341" x="2573.5" y="716.9531"/><ellipse cx="2678.25" cy="732.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M2681.2188,738.5938 Q2680.6406,738.8906 2680,739.0313 Q2679.3594,739.1875 2678.6563,739.1875 Q2676.1563,739.1875 2674.8281,737.5469 Q2673.5156,735.8906 2673.5156,732.7656 Q2673.5156,729.6406 2674.8281,727.9844 Q2676.1563,726.3281 2678.6563,726.3281 Q2679.3594,726.3281 2680,726.4844 Q2680.6563,726.6406 2681.2188,726.9375 L2681.2188,729.6563 Q2680.5938,729.0781 2680,728.8125 Q2679.4063,728.5313 2678.7813,728.5313 Q2677.4375,728.5313 2676.75,729.6094 Q2676.0625,730.6719 2676.0625,732.7656 Q2676.0625,734.8594 2676.75,735.9375 Q2677.4375,737 2678.7813,737 Q2679.4063,737 2680,736.7344 Q2680.5938,736.4531 2681.2188,735.875 L2681.2188,738.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="123" x="2698.75" y="737.1074">HttpNetworkService</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2574.5" x2="2913.5" y1="748.9531" y2="748.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2574.5" x2="2913.5" y1="756.9531" y2="756.9531"/><ellipse cx="2584.5" cy="767.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="2593.5" y="771.1636">new(): Self</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2581.5" y="777.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="315" x="2593.5" y="783.9683">fetch_ip_from_service(url: &amp;str): Result&lt;IpAddr, Error&gt;</text><!--MD5=[ab89a93f52c677ebb198f7b911f26840]
class ConsoleNotificationService--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="73.6094" id="ConsoleNotificationService" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="198" x="2340" y="716.9531"/><ellipse cx="2355" cy="732.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M2357.9688,738.5938 Q2357.3906,738.8906 2356.75,739.0313 Q2356.1094,739.1875 2355.4063,739.1875 Q2352.9063,739.1875 2351.5781,737.5469 Q2350.2656,735.8906 2350.2656,732.7656 Q2350.2656,729.6406 2351.5781,727.9844 Q2352.9063,726.3281 2355.4063,726.3281 Q2356.1094,726.3281 2356.75,726.4844 Q2357.4063,726.6406 2357.9688,726.9375 L2357.9688,729.6563 Q2357.3438,729.0781 2356.75,728.8125 Q2356.1563,728.5313 2355.5313,728.5313 Q2354.1875,728.5313 2353.5,729.6094 Q2352.8125,730.6719 2352.8125,732.7656 Q2352.8125,734.8594 2353.5,735.9375 Q2354.1875,737 2355.5313,737 Q2356.1563,737 2356.75,736.7344 Q2357.3438,736.4531 2357.9688,735.875 L2357.9688,738.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="166" x="2369" y="737.1074">ConsoleNotificationService</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2341" x2="2537" y1="748.9531" y2="748.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2348" y="756.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="2360" y="763.1636">verbose: bool</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="2341" x2="2537" y1="769.7578" y2="769.7578"/><ellipse cx="2351" cy="780.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="2360" y="783.9683">new(verbose: bool): Self</text><!--MD5=[c75862c8cf4cebd944ea00f54c404d92]
class FileSystemConfigDiscovery--><rect fill="#FFFFFF" filter="url(#fh4tnzgxbbamm)" height="73.6094" id="FileSystemConfigDiscovery" rx="7.5" ry="7.5" style="stroke: #1976D2; stroke-width: 1.5;" width="438" x="38" y="716.9531"/><ellipse cx="170.75" cy="732.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #1976D2; stroke-width: 1.0;"/><path d="M173.7188,738.5938 Q173.1406,738.8906 172.5,739.0313 Q171.8594,739.1875 171.1563,739.1875 Q168.6563,739.1875 167.3281,737.5469 Q166.0156,735.8906 166.0156,732.7656 Q166.0156,729.6406 167.3281,727.9844 Q168.6563,726.3281 171.1563,726.3281 Q171.8594,726.3281 172.5,726.4844 Q173.1563,726.6406 173.7188,726.9375 L173.7188,729.6563 Q173.0938,729.0781 172.5,728.8125 Q171.9063,728.5313 171.2813,728.5313 Q169.9375,728.5313 169.25,729.6094 Q168.5625,730.6719 168.5625,732.7656 Q168.5625,734.8594 169.25,735.9375 Q169.9375,737 171.2813,737 Q171.9063,737 172.5,736.7344 Q173.0938,736.4531 173.7188,735.875 L173.7188,738.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="191.25" y="737.1074">FileSystemConfigDiscovery</text><line style="stroke: #1976D2; stroke-width: 1.5;" x1="39" x2="475" y1="748.9531" y2="748.9531"/><line style="stroke: #1976D2; stroke-width: 1.5;" x1="39" x2="475" y1="756.9531" y2="756.9531"/><ellipse cx="49" cy="767.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="58" y="771.1636">new(): Self</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="777.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="412" x="58" y="783.9683">scan_directory(dir: &amp;Path, pattern: &amp;str): Result&lt;Vec&lt;PathBuf&gt;, Error&gt;</text><!--MD5=[8ffd36ea8009256018921f5b8a634fd4]
link CliInterface to DdnsApplication--><path d="M1751.5,161.1631 C1910.16,187.2231 2124.8,222.4831 2302.9,251.7331 " fill="none" id="CliInterface-&gt;DdnsApplication" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2307.89,252.5531,2299.6624,247.1396,2302.9569,251.7381,2298.3583,255.0326,2307.89,252.5531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0d2b76fc083ee2899400182064c12718]
link CliInterface to Args--><path d="M1525,166.2831 C1525,184.4131 1525,206.2031 1525,227.1431 " fill="none" id="CliInterface-&gt;Args" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1525,232.1531,1529,223.1531,1525,227.1531,1521,223.1531,1525,232.1531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[efc0bfa8237d90040f9cf5c01b50b055]
link DdnsApplication to ServiceFactory--><path d="M2439.16,388.9531 C2391.62,408.4031 2341.77,428.7931 2297.48,446.9031 " fill="none" id="DdnsApplication-&gt;ServiceFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2292.66,448.8831,2302.5048,449.1658,2297.2855,446.9844,2299.4668,441.7651,2292.66,448.8831" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4e0a2c87f0b4e2763c6e3e478e7aa562]
link DdnsApplication to UpdateDdnsUseCase--><path d="M2833.25,388.9531 C2886.71,410.7731 2943.07,433.7831 2991.22,453.4331 " fill="none" id="DdnsApplication-&gt;UpdateDdnsUseCase" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2995.85,455.3231,2989.0244,448.2231,2991.2195,453.4366,2986.006,455.6318,2995.85,455.3231" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[caa16fc42645d7f5f5f8ca4cff6e8e09]
link DdnsApplication to AppConfig--><path d="M2964.01,324.8731 C3177.95,342.0731 3461.3,377.2131 3703,448.9531 C3707.36,450.2431 3711.77,451.6931 3716.18,453.2431 " fill="none" id="DdnsApplication-&gt;AppConfig" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3720.96,454.9831,3713.8572,448.1604,3716.2581,453.2824,3711.1361,455.6834,3720.96,454.9831" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d072d7b07358ba9535481f2e5835062e]
link UpdateDdnsUseCase to DdnsUpdateService--><path d="M3475.92,554.4831 C3551.29,564.5831 3630.24,575.1331 3704,584.9531 C4013.34,626.1231 4365.06,672.5531 4620.12,706.1431 " fill="none" id="UpdateDdnsUseCase-&gt;DdnsUpdateService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="4625.38,706.8331,4616.9837,701.6851,4620.4234,706.176,4615.9324,709.6157,4625.38,706.8331" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[dbd69c53c6e6be9bc571ea47778dc4d2]
link DdnsUpdateService to IpRepository--><path d="M4757.32,829.0431 C4731.35,839.1531 4705.41,849.8831 4681,860.9531 C4642.66,878.3331 4601.91,900.0931 4566.55,920.1231 " fill="none" id="DdnsUpdateService-&gt;IpRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="4561.82,922.8131,4571.6219,921.852,4566.1691,920.3463,4567.6749,914.8935,4561.82,922.8131" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1a614edf0b4e8d0eb261ad5d23c8c443]
link DdnsUpdateService to WebServerHandler--><path d="M4625.38,796.2431 C4508.48,812.8231 4378,834.3931 4260,860.9531 C4187.79,877.2031 4109.41,900.1031 4042.4,921.3431 " fill="none" id="DdnsUpdateService-&gt;WebServerHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="4037.6,922.8731,4047.3893,923.9548,4042.3644,921.3565,4044.9627,916.3317,4037.6,922.8731" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ed6625409c41361a0d13a77f9bc424c6]
link DdnsUpdateService to NetworkService--><path d="M5194.49,829.0231 C5220.84,839.1831 5247.18,849.9231 5272,860.9531 C5320.29,882.4131 5372.51,910.2631 5413.73,933.4131 " fill="none" id="DdnsUpdateService-&gt;NetworkService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="5418.19,935.9231,5412.3155,928.0181,5413.8348,933.4671,5408.3858,934.9864,5418.19,935.9231" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3c548160dcaac9972ff3e778b98c90b4]
link DdnsUpdateService to NotificationService--><path d="M4976,829.2131 C4976,865.0231 4976,906.6231 4976,936.7131 " fill="none" id="DdnsUpdateService-&gt;NotificationService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="4976,941.8131,4980,932.8131,4976,936.8131,4972,932.8131,4976,941.8131" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[787daf2929e2f8cdf8209e359b827ba7]
link ServiceFactory to FileIpRepository--><path d="M2158,561.0731 C2158,604.4331 2158,664.2131 2158,705.4731 " fill="none" id="ServiceFactory-&gt;FileIpRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2158,710.6631,2162,701.6631,2158,705.6631,2154,701.6631,2158,710.6631" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[dc79a537c25ee91284f14da2c775ae15]
link ServiceFactory to NginxHandler--><path d="M2038.16,561.0731 C1955.71,599.0031 1845.95,649.4831 1759.71,689.1531 " fill="none" id="ServiceFactory-&gt;NginxHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1755.11,691.2731,1764.9581,691.1531,1759.654,689.1869,1761.6202,683.8827,1755.11,691.2731" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fd377a58031af92d4297a93cee588eaf]
link ServiceFactory to ApacheHandler--><path d="M1806.27,514.6531 C1635.89,525.1631 1429.58,547.2431 1249,592.9531 C1138.14,621.0131 1017.73,676.7631 943.31,714.4631 " fill="none" id="ServiceFactory-&gt;ApacheHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="938.47,716.9231,948.3063,716.4256,942.9306,714.6642,944.692,709.2886,938.47,716.9231" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4265e8ea2b53c6a2ad728af5bc916d89]
link ServiceFactory to HttpNetworkService--><path d="M2415.46,561.0131 C2489.67,577.1131 2552.01,590.9731 2556,592.9531 C2616.21,622.7931 2673.18,676.1031 2708.3,712.9331 " fill="none" id="ServiceFactory-&gt;HttpNetworkService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2712.06,716.8931,2708.767,707.6111,2708.6185,713.266,2702.9636,713.1175,2712.06,716.8931" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2eb3af175bc924ead07914b7e99e06ae]
link ServiceFactory to ConsoleNotificationService--><path d="M2278.54,561.0531 C2294.25,570.6131 2309.54,581.2831 2323,592.9531 C2362.44,627.1531 2395.98,677.2331 2416.7,712.2231 " fill="none" id="ServiceFactory-&gt;ConsoleNotificationService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2419.41,716.8431,2418.3101,707.0559,2416.8818,712.5294,2411.4082,711.101,2419.41,716.8431" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e3f9183368b7555eecf449ae98c7c9e1]
link ServiceFactory to FileSystemConfigDiscovery--><path d="M1806.46,514.3231 C1354.89,526.6131 614.62,552.5731 494,592.9531 C418.37,618.2731 344.33,674.8231 299.67,713.4331 " fill="none" id="ServiceFactory-&gt;FileSystemConfigDiscovery" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="295.7,716.8831,305.1135,713.9871,299.47,713.5987,299.8584,707.9552,295.7,716.8831" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c1b4567ba856b72c2ab68ed0a7ec43e8]
link FileIpRepository to IpRepository--><path d="M2212.24,797.2031 C2242.9,818.4031 2283.02,841.8831 2323,852.9531 C2374.86,867.3031 4207.95,847.3131 4260,860.9531 C4300.41,871.5431 4341.32,891.7331 4376.17,912.4031 " fill="none" id="FileIpRepository-&gt;IpRepository" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="4379.87,906.4631,4393.28,922.8731,4372.56,918.4031,4379.87,906.4631" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c735cf2fd69b110bcf975de338ae7809]
link NginxHandler to WebServerHandler--><path d="M1817.57,816.4731 C1873.96,831.4231 1935.92,845.2931 1994,852.9531 C2076.51,863.8331 3409.72,848.4731 3492,860.9531 C3565.69,872.1331 3644.83,894.3931 3712,916.5131 " fill="none" id="NginxHandler-&gt;WebServerHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="3714.32,909.9131,3731.07,922.9031,3709.88,923.1931,3714.32,909.9131" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7197a7b1763a4a97dc9d89e13a100296]
link ApacheHandler to WebServerHandler--><path d="M980.39,791.0731 C1055.11,813.8131 1156.89,841.0431 1249,852.9531 C1372.58,868.9331 3368.78,842.3731 3492,860.9531 C3565.7,872.0631 3644.84,894.3131 3712.01,916.4531 " fill="none" id="ApacheHandler-&gt;WebServerHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="3714.34,909.8531,3731.08,922.8331,3709.89,923.1231,3714.34,909.8531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e1e70feda417fb6dd5bb4204ab11f452]
link HttpNetworkService to NetworkService--><path d="M2914.58,766.2331 C3242.59,787.4031 3984.17,832.7731 4609,852.9531 C4645.82,854.1431 5236.33,851.7531 5272,860.9531 C5322,873.8431 5373.11,900.4231 5413.27,925.0031 " fill="none" id="HttpNetworkService-&gt;NetworkService" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="5417.12,919.1531,5430.33,935.7231,5409.67,931.0131,5417.12,919.1531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[21f661e5657a03795222f9da58e4ac0d]
link ConsoleNotificationService to NotificationService--><path d="M2469.71,791.2131 C2491.25,813.6931 2522.16,840.5831 2556,852.9531 C2583.72,863.0831 4652.02,855.3631 4681,860.9531 C4753.58,874.9631 4831.1,906.4231 4888.46,933.1931 " fill="none" id="ConsoleNotificationService-&gt;NotificationService" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="4891.66,926.9631,4906.72,941.8731,4885.65,939.6031,4891.66,926.9631" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[59649280ca5b6ea85979bdbc2f2ead87]
link FileSystemConfigDiscovery to ConfigDiscoveryService--><path d="M326.21,791.0731 C372.39,813.2631 435.22,839.8831 494,852.9531 C961.5,956.9231 2385.57,974.6831 2975.16,977.5131 " fill="none" id="FileSystemConfigDiscovery-&gt;ConfigDiscoveryService" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="2975.38,970.5231,2995.35,977.6131,2975.31,984.5231,2975.38,970.5231" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3b6dae35c9782067ee98db91d941fe6d]
link DdnsUpdateService to IpEntry--><path d="M5326.58,773.0431 C5601.38,790.0131 5959.92,819.0831 6100,860.9531 C6132.81,870.7631 6166.38,885.6331 6197.12,901.5131 " fill="none" id="DdnsUpdateService-&gt;IpEntry" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="6201.64,903.8631,6195.4965,896.1652,6197.2027,901.5586,6191.8093,903.2648,6201.64,903.8631" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ac7f73dd83d3ad45715c2fcc50cab0d1]
link DdnsUpdateService to WebServerConfig--><path d="M5326.6,779.3031 C5449.24,794.7131 5586.37,819.8731 5707,860.9531 C5753.36,876.7431 5801.25,902.8831 5839.37,926.4631 " fill="none" id="DdnsUpdateService-&gt;WebServerConfig" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="5843.97,929.3331,5838.4457,921.1795,5839.726,926.6896,5834.2159,927.9699,5843.97,929.3331" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[49763afa74bcea792ee85aa7b2d7b51e]
link WebServerConfig to WebServerType--><path d="M5915,1028.8631 C5915,1053.4031 5915,1083.2031 5915,1108.4231 " fill="none" id="WebServerConfig-&gt;WebServerType" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="5915,1113.7331,5919,1104.7331,5915,1108.7331,5911,1104.7331,5915,1113.7331" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1a3235a149224192a13f05cb70053f3d]
@startuml clean-architecture
skinparam backgroundColor #FAFAFA
skinparam roundcorner 15
skinparam classBackgroundColor #FFFFFF
skinparam classBorderColor #1976D2
skinparam packageBackgroundColor #E3F2FD

title DDNS Updater - Clean Architecture Layers

package "Interface Layer" as interface #E1F5FE {
    class CliInterface {
        +run(): Result<(), Error>
        -run_async(args: Args): Result<(), Error>
        -display_results(hostname: &str, result: &MultiConfigResult, verbose: bool)
    }
    
    class Args {
        +host: String
        +nginx_config: Option<PathBuf>
        +config_dir: Option<PathBuf>
        +pattern: String
        +backup_dir: Option<PathBuf>
        +no_reload: bool
        +verbose: bool
        +parse_args(): Args
    }
}

package "Application Layer" as application #F3E5F5 {
    class DdnsApplication {
        -config: AppConfig
        -ip_repository: Arc<dyn IpRepository>
        -network_service: Arc<dyn NetworkService>
        -notification_service: Arc<dyn NotificationService>
        -config_discovery: Arc<dyn ConfigDiscoveryService>
        +new(config: AppConfig): Result<Self, Error>
        +process_single_config(hostname: &str, config: &WebServerConfig): Result<UpdateResult, Error>
        +process_multiple_configs(hostname: &str, configs: Vec<WebServerConfig>): Result<MultiConfigResult, Error>
        +validate_configs(configs: &[WebServerConfig]): Result<Vec<ValidationResult>, Error>
    }
    
    class ServiceFactory {
        +create_ip_repository(storage_dir: PathBuf): Result<Arc<dyn IpRepository>, Error>
        +create_web_server_handler(server_type: WebServerType, backup_dir: Option<PathBuf>): Arc<dyn WebServerHandler>
        +create_network_service(): Arc<dyn NetworkService>
        +create_notification_service(verbose: bool): Arc<dyn NotificationService>
        +create_config_discovery_service(): Arc<dyn ConfigDiscoveryService>
    }
    
    class UpdateDdnsUseCase {
        -service: DdnsUpdateService
        +new(ip_repository: Arc<dyn IpRepository>, web_server_handler: Arc<dyn WebServerHandler>, network_service: Arc<dyn NetworkService>, notification_service: Arc<dyn NotificationService>): Self
        +execute(hostname: &str, config: &WebServerConfig): Result<UpdateResult, Error>
        +execute_with_options(hostname: &str, config: &WebServerConfig, no_reload: bool): Result<UpdateResult, Error>
    }
    
    class AppConfig {
        +storage_dir: PathBuf
        +server_type: WebServerType
        +backup_dir: Option<PathBuf>
        +no_reload: bool
        +verbose: bool
    }
}

package "Domain Layer" as domain #E8F5E8 {
    package "Entities" {
        class IpEntry {
            +ip: IpAddr
            +hostname: String
            +comment: Option<String>
            +created_at: DateTime<Utc>
            +updated_at: DateTime<Utc>
            +new(ip: IpAddr, hostname: String, comment: Option<String>): Self
            +update_ip(new_ip: IpAddr)
            +update_comment(comment: Option<String>)
        }
        
        class WebServerConfig {
            +path: PathBuf
            +server_type: WebServerType
            +backup_path: Option<PathBuf>
            +new(path: PathBuf, server_type: WebServerType): Self
        }
        
        enum WebServerType {
            Nginx
            Apache
            Caddy
            Traefik
        }
    }
    
    package "Services" {
        class DdnsUpdateService {
            -ip_repository: Arc<dyn IpRepository>
            -web_server_handler: Arc<dyn WebServerHandler>
            -network_service: Arc<dyn NetworkService>
            -notification_service: Arc<dyn NotificationService>
            +new(...): Self
            +update_ddns(hostname: &str, config: &WebServerConfig): Result<UpdateResult, Error>
            +update_ddns_with_options(hostname: &str, config: &WebServerConfig, no_reload: bool): Result<UpdateResult, Error>
            +list_entries(): Result<Vec<IpEntry>, Error>
        }
    }
    
    package "Ports" {
        interface IpRepository {
            +store_ip(hostname: &str, ip: IpAddr): Result<(), Error>
            +load_ip(hostname: &str): Result<Option<IpAddr>, Error>
            +get_ip_entry(hostname: &str): Result<Option<IpEntry>, Error>
            +list_all_entries(): Result<Vec<IpEntry>, Error>
            +delete_entry(hostname: &str): Result<bool, Error>
        }
        
        interface WebServerHandler {
            +update_allow_list(config: &WebServerConfig, hostname: &str, old_ip: Option<IpAddr>, new_ip: IpAddr): Result<bool, Error>
            +validate_config(config: &WebServerConfig): Result<(), Error>
            +create_backup(config: &WebServerConfig): Result<PathBuf, Error>
            +test_configuration(config: &WebServerConfig): Result<bool, Error>
            +reload_server(): Result<(), Error>
        }
        
        interface NetworkService {
            +get_public_ip(): Result<IpAddr, Error>
            +resolve_hostname(hostname: &str): Result<Vec<IpAddr>, Error>
            +is_reachable(ip: IpAddr): Result<bool, Error>
        }
        
        interface NotificationService {
            +notify_ip_change(hostname: &str, old_ip: Option<IpAddr>, new_ip: IpAddr): Result<(), Error>
            +notify_error(error: &str, context: Option<&str>): Result<(), Error>
        }
        
        interface ConfigDiscoveryService {
            +discover_configs(pattern: Option<&str>): Result<Vec<WebServerConfig>, Error>
            +detect_server_type(config_path: &Path): Result<WebServerType, DomainError>
        }
    }
}

package "Infrastructure Layer" as infrastructure #FFF3E0 {
    class FileIpRepository {
        -storage_dir: PathBuf
        +new(storage_dir: PathBuf): Result<Self, Error>
        -get_file_path(hostname: &str): PathBuf
    }
    
    class NginxHandler {
        -backup_dir: Option<PathBuf>
        +new(): Self
        +with_backup_dir(backup_dir: Option<PathBuf>): Self
        -update_nginx_config(config_path: &Path, hostname: &str, old_ip: Option<IpAddr>, new_ip: IpAddr): Result<bool, Error>
        -validate_config(config_path: &Path): Result<(), Error>
        -validate_nginx_structure(content: &str): bool
    }
    
    class ApacheHandler {
        +new(): Self
        -update_apache_config(config_path: &Path, hostname: &str, old_ip: Option<IpAddr>, new_ip: IpAddr): Result<bool, Error>
    }
    
    class HttpNetworkService {
        +new(): Self
        -fetch_ip_from_service(url: &str): Result<IpAddr, Error>
    }
    
    class ConsoleNotificationService {
        -verbose: bool
        +new(verbose: bool): Self
    }
    
    class FileSystemConfigDiscovery {
        +new(): Self
        -scan_directory(dir: &Path, pattern: &str): Result<Vec<PathBuf>, Error>
    }
}

CliInterface - -> DdnsApplication
CliInterface - -> Args
DdnsApplication - -> ServiceFactory
DdnsApplication - -> UpdateDdnsUseCase
DdnsApplication - -> AppConfig
UpdateDdnsUseCase - -> DdnsUpdateService
DdnsUpdateService - -> IpRepository
DdnsUpdateService - -> WebServerHandler
DdnsUpdateService - -> NetworkService
DdnsUpdateService - -> NotificationService
ServiceFactory - -> FileIpRepository
ServiceFactory - -> NginxHandler
ServiceFactory - -> ApacheHandler
ServiceFactory - -> HttpNetworkService
ServiceFactory - -> ConsoleNotificationService
ServiceFactory - -> FileSystemConfigDiscovery
FileIpRepository ..|> IpRepository
NginxHandler ..|> WebServerHandler
ApacheHandler ..|> WebServerHandler
HttpNetworkService ..|> NetworkService
ConsoleNotificationService ..|> NotificationService
FileSystemConfigDiscovery ..|> ConfigDiscoveryService
DdnsUpdateService - -> IpEntry
DdnsUpdateService - -> WebServerConfig
WebServerConfig - -> WebServerType

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>